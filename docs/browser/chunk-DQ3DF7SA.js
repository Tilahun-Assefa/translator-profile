import{a as z}from"./chunk-VJUUPMZN.js";import{a as J,b as K}from"./chunk-RCMLRJ4B.js";import{b as j}from"./chunk-I5U74EJ7.js";import{d as R}from"./chunk-KXDR3QM3.js";import{a as B,c as F,f as D,h as O,m as G,n as H,o as Q,s as Y}from"./chunk-KEJPACTK.js";import{Cb as c,Db as A,Eb as p,Fb as _,Gb as g,H as v,Hb as C,Ia as a,Sa as P,Sb as d,Tb as N,U as S,Vb as W,Xa as M,_ as u,gb as w,hb as E,ia as h,ja as f,kb as T,lb as V,nb as b,ob as I,pb as r,qb as n,rb as q,s as x,sb as L,tb as k,ua as y,ub as s}from"./chunk-KSU6WVC3.js";var U=(()=>{class e{constructor(){this.urlProduct=J.urlAddress,this.http=u(R),this.selectedProduct=y(void 0),this.quantity=N({source:this.selectedProduct,computation:i=>i?1:0}),this.total=d(()=>(this.selectedProduct()?.price??0)*this.quantity()),this.color=d(()=>this.total()>400?"green":"red"),this.productResource=j({loader:()=>this.http.get(this.urlProduct+"/api/Product/GetAll").pipe(x(i=>i.data),v(2e3))}),this.products=d(()=>this.productResource.value()??[]),this.error=d(()=>this.productResource.error()),this.errorMessage=d(()=>K(this.error(),"Product")),this.errorStatus=d(()=>this.error().status),this.isLoading=this.productResource.isLoading,this.errEffect=W(()=>console.error("Error",this.error()))}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Z(e,m){e&1&&(r(0,"div"),c(1,"...Loading products"),n())}function $(e,m){if(e&1&&(r(0,"div",0),c(1),n()),e&2){let i=s();a(),p("An error occured: ",i.errorMessage(),"")}}function tt(e,m){if(e&1&&(r(0,"option",3),c(1),n()),e&2){let i=m.$implicit;w("ngValue",i),a(),A(i.name)}}function et(e,m){if(e&1){let i=L();r(0,"select",1),C("ngModelChange",function(t){h(i);let l=s();return g(l.selectedProduct,t)||(l.selectedProduct=t),f(t)}),r(1,"option",2),c(2,"--select a product--"),n(),b(3,tt,2,2,"option",3,V),n(),r(5,"div"),c(6," Quantity: "),r(7,"input",4),C("ngModelChange",function(t){h(i);let l=s();return g(l.quantity,t)||(l.quantity=t),f(t)}),n()(),r(8,"div"),c(9),q(10,"br"),c(11),n(),r(12,"div"),c(13),n(),r(14,"button",5),k("click",function(){h(i);let t=s();return f(t.addToCart(t.selectedProduct(),t.quantity()))}),c(15,"Buy"),n()}if(e&2){let i,o,t=s();_("ngModel",t.selectedProduct),a(3),I(t.products()),a(4),_("ngModel",t.quantity),a(2),p(" Name: ",(i=t.selectedProduct())==null?null:i.name," "),a(2),p(" Cost: ",(o=t.selectedProduct())==null?null:o.price,`
`),a(),E("color",t.color()),a(),p("Total: ",t.total(),"")}}var _t=(()=>{class e{constructor(){this.productService=u(U),this.cartService=u(z),this.products=this.productService.products,this.selectedProduct=this.productService.selectedProduct,this.quantity=this.productService.quantity,this.total=this.productService.total,this.color=this.productService.color,this.isLoading=this.productService.isLoading,this.errorMessage=this.productService.errorMessage}addToCart(i,o){window.alert("Your product has been added to the cart!"),this.cartService.addToOrder(i,o)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=P({type:e,selectors:[["app-product"]],decls:5,vars:1,consts:[[2,"color","red"],[3,"ngModelChange","ngModel"],["value","undefined","disabled","","selected",""],[3,"ngValue"],["type","number",3,"ngModelChange","ngModel"],["type","button",3,"click"]],template:function(o,t){o&1&&(r(0,"h2"),c(1,"Product Sales"),n(),M(2,Z,2,0,"div")(3,$,2,1,"div",0)(4,et,16,7)),o&2&&(a(2),T(t.isLoading()?2:t.errorMessage()?3:4))},dependencies:[Y,H,Q,B,O,G,F,D],encapsulation:2})}}return e})();export{_t as ProductComponent};
