import{f as h}from"./chunk-ULSK6AIX.js";import{d as l}from"./chunk-KXDR3QM3.js";import{D as s,U as c,Z as a,k as n,p as i,s as u}from"./chunk-KSU6WVC3.js";var S=(()=>{class r{constructor(t,e){this.http=t,this.router=e,this.apiUrl="http://localhost:3002/api",this.userSubject=new n(JSON.parse(localStorage.getItem("user"))),this.user$=this.userSubject.asObservable()}get userValue(){return this.userSubject.value}login(t,e){return this.http.post(`${this.apiUrl}/customer/authenticate`,{email:t,password:e}).pipe(u(o=>(localStorage.setItem("user",JSON.stringify(o)),this.userSubject.next(o),o)),s(o=>i(()=>new Error("Either Incorrect Username or Password"))))}register(t){return this.http.post(`${this.apiUrl}/auth/register`,t).pipe(s(this.handleError))}logout(){localStorage.removeItem("user"),this.userSubject.next(null),this.router.navigate(["/login"])}getUser(){return localStorage.getItem("user")}isLoggedIn(){return this.getUser()!==null}canActivate(){}handleError(t){return t.status===0?console.error("An error occurred:",t.error):console.error(`Backend returned code ${t.status}, body was: `,t.error),i(()=>new Error("Something bad happened; please try again later."))}static{this.\u0275fac=function(e){return new(e||r)(a(l),a(h))}}static{this.\u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{S as a};
